import{r,a as xe,R as ve}from"./vendor.js";import{r as P}from"./utils.js";import{W as a,P as pe,c as Ee,a as ge,d as we,A as B}from"./game.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))c(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const p of o.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&c(p)}).observe(document,{childList:!0,subtree:!0});function x(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(l){if(l.ep)return;l.ep=!0;const o=x(l);fetch(l.href,o)}})();var ie={exports:{}},_={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Se=r,Me=Symbol.for("react.element"),Oe=Symbol.for("react.fragment"),Ne=Object.prototype.hasOwnProperty,Re=Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,je={key:!0,ref:!0,__self:!0,__source:!0};function oe(w,s,x){var c,l={},o=null,p=null;x!==void 0&&(o=""+x),s.key!==void 0&&(o=""+s.key),s.ref!==void 0&&(p=s.ref);for(c in s)Ne.call(s,c)&&!je.hasOwnProperty(c)&&(l[c]=s[c]);if(w&&w.defaultProps)for(c in s=w.defaultProps,s)l[c]===void 0&&(l[c]=s[c]);return{$$typeof:Me,type:w,key:o,ref:p,props:l,_owner:Re.current}}_.Fragment=Oe;_.jsx=oe;_.jsxs=oe;ie.exports=_;var t=ie.exports,V={},re=xe;V.createRoot=re.createRoot,V.hydrateRoot=re.hydrateRoot;function Te(){const w=r.useRef(null),[s,x]=r.useState("menu"),[c,l]=r.useState(!1),[o,p]=r.useState(!1),[j,$]=r.useState(0),[k,ce]=r.useState(parseInt(localStorage.getItem("halt_high_score")||"0")),[ae,q]=r.useState(!1),[G,D]=r.useState(!1),[le,K]=r.useState(!1),[E,W]=r.useState({noEnemies:!1,particlesCount:150,scoreMultiplier:1});r.useEffect(()=>{if(s==="menu"){const n=i=>{const d=i.key.toLowerCase();N.current.push(d),N.current.length>10&&N.current.shift();const h=N.current.join("");h.endsWith("wasd5")&&(D(!0),T(),setTimeout(()=>D(!1),3e3),N.current=[]),h.endsWith("world")&&(p(!0),l(!0),T(),N.current=[]),h.endsWith("cheat")&&(K(!0),T(),N.current=[])};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)}},[s]);const de=n=>{W(i=>({...i,[n]:!i[n]}))};r.useEffect(()=>{j>k&&(ce(j),localStorage.setItem("halt_high_score",j.toString()))},[j,k]);const T=()=>{q(!0),setTimeout(()=>q(!1),200)},[z,J]=r.useState({x:0,y:0}),[v,I]=r.useState({x:a/2,y:a/2}),[S,b]=r.useState({}),[M,ue]=r.useState({width:window.innerWidth,height:window.innerHeight}),[Ce,Z]=r.useState(!1),[O,Q]=r.useState(!1),[f,Y]=r.useState({active:!1,x:0,y:0,currentX:0,currentY:0}),A=r.useRef(new Audio),m=r.useRef({}),N=r.useRef([]),F=r.useRef([]),L=r.useRef([]),H=r.useRef([]),U=r.useRef();r.useEffect(()=>{const n=()=>{ue({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),r.useEffect(()=>{const n=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);Q(n)},[]);const ee=()=>{I({x:a/2,y:a/2}),J({x:a/2-M.width/2,y:a/2-M.height/2});const n=["music/game/bgmusic/bgmusic.mp3","music/game/bgmusic/bgmusic2.mp3","music/game/bgmusic/bgmusic3.mp3"],i=n[Math.floor(Math.random()*n.length)];if(A.current.src=i,A.current.loop=!0,A.current.play().catch(d=>console.log("Audio play blocked by browser",d)),Z(!0),F.current=Array.from({length:E.particlesCount},()=>({x:Math.random()*a,y:Math.random()*a,vx:P(-1,1),vy:P(-1,1),radius:2+Math.random()*2,color:`hsl(185, 100%, ${60+Math.random()*20}%)`,wobble:Math.random()*Math.PI*2})),E.noEnemies)L.current=[];else{const d=o?B*4:c?B*2.5:B;L.current=Array.from({length:d},()=>({x:Math.random()*a,y:Math.random()*a,vx:(Math.random()-.5)*(o?20:c?12:3),vy:(Math.random()-.5)*(o?20:c?12:3),radius:(o?30:c?20:15)+Math.random()*10,wobble:Math.random()*Math.PI*2,isAggressive:o?!0:c?Math.random()>.3:Math.random()>.5}))}H.current=Array.from({length:pe},()=>({x:Math.random()*a,y:Math.random()*a,type:["shield","time","multi"][Math.floor(Math.random()*3)],radius:15})),$(G||E.highScoreStart?5e4:0),D(!1),b({}),m.current={},x("playing")};r.useEffect(()=>{if(s==="playing"){const n=h=>{m.current[h.key]=!0},i=h=>{m.current[h.key]=!1},d=h=>{I(e=>({...e,y:Math.max(0,Math.min(a,e.y+h.deltaY))}))};return window.addEventListener("keydown",n),window.addEventListener("keyup",i),window.addEventListener("wheel",d,{passive:!1}),()=>{window.removeEventListener("keydown",n),window.removeEventListener("keyup",i),window.removeEventListener("wheel",d)}}},[s]);const te=()=>{if(s!=="playing")return;const n=S.time>0?8:6;let i=v.x,d=v.y;if((m.current.w||m.current.W)&&(d-=n),(m.current.s||m.current.S)&&(d+=n),(m.current.a||m.current.A)&&(i-=n),(m.current.d||m.current.D)&&(i+=n),O&&f.active){const e=f.currentX-f.x,u=f.currentY-f.y,y=Math.sqrt(e*e+u*u);y>5&&(i+=e/y*n,d+=u/y*n)}i=Math.max(0,Math.min(a,i)),d=Math.max(0,Math.min(a,d)),I({x:i,y:d}),J({x:i-M.width/2,y:d-M.height/2}),b(e=>{const u={...e};let y=!1;return Object.keys(u).forEach(g=>{u[g]>0&&(u[g]-=16,u[g]<=0&&delete u[g],y=!0)}),y?u:e});const h=S.time>0?.3:1;F.current.forEach(e=>{e.wobble+=.1*h,e.x+=(e.vx+Math.sin(e.wobble)*.1)*h,e.y+=(e.vy+Math.cos(e.wobble)*.1)*h,e.vx*=.98,e.vy*=.98,(e.x<0||e.x>a)&&(e.vx*=-1),(e.y<0||e.y>a)&&(e.vy*=-1);const u=v.x-e.x,y=v.y-e.y;Math.sqrt(u*u+y*y)<30&&($(C=>C+(S.multi>0?20:10)),T(),e.x=Math.random()*a,e.y=Math.random()*a)}),L.current.forEach(e=>{const u=v.x-e.x,y=v.y-e.y,g=Math.sqrt(u*u+y*y),C=o?2500:c?1500:400,fe=o?.8:c?.4:.15;if(g<C&&e.isAggressive){const R=Ee(v,e,{vx:e.vx,vy:e.vy},fe,maxSpeed);e.vx=R.vx,e.vy=R.vy}else{const R=ge({vx:e.vx,vy:e.vy},.95);e.vx=R.vx,e.vy=R.vy,Math.abs(e.vx)<.1&&Math.abs(e.vy)<.1&&(e.vx=P(-1,1),e.vy=P(-1,1))}e.wobble+=.05*h,e.x+=(e.vx+Math.sin(e.wobble)*.5)*h,e.y+=(e.vy+Math.cos(e.wobble)*.5)*h,(e.x<0||e.x>a)&&(e.vx*=-1),(e.y<0||e.y>a)&&(e.vy*=-1),g<e.radius+15&&(S.shield>0?(T(),b(R=>{const se={...R};return delete se.shield,se}),e.x=Math.random()*a,e.y=Math.random()*a):(m.current={},x("gameOver")))}),H.current.forEach(e=>{const u=v.x-e.x,y=v.y-e.y;Math.sqrt(u*u+y*y)<30&&(T(),b(C=>({...C,[e.type]:1e4})),e.x=Math.random()*a,e.y=Math.random()*a)}),he(),U.current=requestAnimationFrame(te)},he=()=>{const n=w.current;if(!n)return;const i=n.getContext("2d");we(i,M,z,F.current,L.current,H.current,v,S)};r.useEffect(()=>(s==="playing"&&(U.current=requestAnimationFrame(te)),()=>cancelAnimationFrame(U.current)),[s,v,M]);const X=r.useCallback(n=>{s==="playing"&&I(i=>({...i,y:Math.max(0,Math.min(a,i.y+n.deltaY))}))},[s]);r.useEffect(()=>{if(s==="playing"||s==="paused"){const n=d=>{d.key==="Escape"&&x(h=>h==="playing"?"paused":"playing"),m.current[d.key]=!0},i=d=>{m.current[d.key]=!1};return window.addEventListener("keydown",n),window.addEventListener("keyup",i),s==="playing"&&window.addEventListener("wheel",X,{passive:!1}),()=>{window.removeEventListener("keydown",n),window.removeEventListener("keyup",i),window.removeEventListener("wheel",X)}}},[s,z,X]),r.useEffect(()=>{(s==="gameOver"||s==="menu")&&(A.current.pause(),Z(!1))},[s]);const ne=n=>{const i=n.touches[0];Y({active:!0,x:i.clientX,y:i.clientY,currentX:i.clientX,currentY:i.clientY})},me=n=>{if(!f.active)return;const i=n.touches[0];Y(d=>({...d,currentX:i.clientX,currentY:i.clientY}))},ye=()=>{Y({active:!1,x:0,y:0,currentX:0,currentY:0})};return t.jsxs("div",{className:`game-container ${ae?"shake":""}`,onTouchStart:O?ne:void 0,onTouchMove:O?me:void 0,onTouchEnd:O?ye:void 0,children:[G&&t.jsx("div",{className:"hack-notification",children:"SYSTEM HACKED! 50000 score has been added!"}),le&&t.jsxs("div",{className:"hack-menu",children:[t.jsx("h2",{children:"HACK MENU"}),t.jsxs("div",{className:"hack-item",children:[t.jsx("span",{children:"NO ENEMIES"}),t.jsx("button",{className:E.noEnemies?"active":"",onClick:()=>de("noEnemies"),children:E.noEnemies?"ON":"OFF"})]}),t.jsxs("div",{className:"hack-item",children:[t.jsx("span",{children:"HIGH SCORE START"}),t.jsx("button",{className:E.highScoreStart?"active":"",onClick:()=>W(n=>({...n,highScoreStart:!n.highScoreStart})),children:E.highScoreStart?"ON":"OFF"})]}),t.jsxs("div",{className:"hack-item",children:[t.jsx("span",{children:"PARTICLES (300)"}),t.jsx("button",{className:E.particlesCount===300?"active":"",onClick:()=>W(n=>({...n,particlesCount:n.particlesCount===300?150:300})),children:E.particlesCount===300?"ON":"OFF"})]}),t.jsx("button",{className:"close-hack",onClick:()=>K(!1),children:"CLOSE"})]}),s==="playing"&&t.jsxs("div",{className:"hud",children:[t.jsxs("div",{className:`score ${o?"nightmare-plus-active":c?"nightmare-active":""}`,children:[o?"VOID PROTOCOL ERROR: ":c?"NIGHTMARE SCORE: ":"SCORE: ",j]}),t.jsxs("div",{className:"high-score",children:["RECORD: ",k]}),t.jsxs("div",{className:"hud-powerups",children:[S.shield>0&&t.jsx("div",{className:"powerup-indicator powerup-shield",children:"Shield"}),S.time>0&&t.jsx("div",{className:"powerup-indicator powerup-time",children:"Time Warp"}),S.multi>0&&t.jsx("div",{className:"powerup-indicator powerup-multi",children:"2X Score"})]})]}),t.jsx("canvas",{ref:w,width:M.width,height:M.height,style:{opacity:s==="playing"?1:.3,cursor:"none",touchAction:"none"}}),O&&s==="playing"&&t.jsx("div",{className:"joystick-area",onTouchStart:ne,children:f.active&&t.jsx("div",{className:"joystick-container",style:{left:f.x-50,top:f.y-50},children:t.jsx("div",{className:"joystick-base",children:t.jsx("div",{className:"joystick-stick",style:{transform:`translate(${Math.min(40,Math.max(-40,f.currentX-f.x))}px, ${Math.min(40,Math.max(-40,f.currentY-f.y))}px)`}})})})}),s==="menu"&&t.jsxs("div",{className:"overlay",children:[t.jsx("h1",{className:"title",children:"HALT"}),t.jsx("p",{className:"tagline",children:"Universal Exploration. Control the void."}),t.jsxs("div",{className:"high-score",style:{marginBottom:"10px",fontSize:"18px"},children:["BEST METRIC: ",k]}),t.jsx("div",{className:`nightmare-toggle ${c&&!o?"active":""}`,onClick:()=>{l(!c),p(!1)},style:{marginBottom:"10px"},children:c&&!o?"SYSTEM ALERT: NIGHTMARE MODE ACTIVE":"ENABLE NIGHTMARE PROTOCOL"}),t.jsx("div",{className:`nightmare-toggle nightmare-plus-toggle ${o?"active":""}`,onClick:()=>{p(!o),l(!0)},style:{marginBottom:"15px"},children:o?"VOID ERROR: NIGHTMARE+++ ACTIVE":"INITIATE VOID PROTOCOL (+++)"}),t.jsx("button",{onClick:ee,className:c?"nightmare-active":"",children:c?"ENGAGE LETHAL CORE":"INITIALIZE SYSTEM"}),t.jsxs("div",{className:"menu-instructions",children:[t.jsx("p",{children:"WASD / MOUSE: NAVIGATION"}),t.jsx("p",{children:"SCROLL: ELEVATION CONTROL"}),t.jsx("p",{children:"COLLECT POWER CORES FOR ABILITIES"}),t.jsx("p",{style:{marginTop:"10px",color:"#ffcc33"},children:"MUSIC WILL START ON SYSTEM INITIALIZATION"})]}),t.jsxs("div",{className:"mobile-toggle-container",onClick:()=>Q(!O),children:[t.jsx("div",{className:`mobile-icon ${O?"active":""}`,children:"ðŸ“±"}),t.jsxs("span",{style:{fontSize:"12px",opacity:.6},children:["MOBILE MODE ",O?"ON":"OFF"]})]})]}),s==="paused"&&t.jsxs("div",{className:"overlay",children:[t.jsx("h1",{className:"title",children:"PAUSED"}),t.jsx("button",{onClick:()=>x("playing"),children:"RESUME SESSION"}),t.jsx("button",{onClick:()=>{m.current={},x("menu")},style:{marginTop:"10px"},children:"EXIT TO TERMINAL"})]}),s==="gameOver"&&t.jsxs("div",{className:"overlay",children:[t.jsx("h1",{children:"SYSTEM CRITICAL: SHUTDOWN"}),t.jsxs("p",{children:["Exploration Metric: ",j]}),t.jsx("button",{onClick:ee,children:"RESTART CORE"}),t.jsx("button",{onClick:()=>{m.current={},x("menu")},style:{marginTop:"10px"},children:"EXIT TO TERMINAL"})]})]})}V.createRoot(document.getElementById("root")).render(t.jsx(ve.StrictMode,{children:t.jsx(Te,{})}));
